<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--
 Copyright (c) 2014, 2017, Oracle and/or its affiliates. All rights reserved.
 DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.

 This code is free software; you can redistribute it and/or modify it
 under the terms of the GNU General Public License version 2 only, as
 published by the Free Software Foundation.

 This code is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 version 2 for more details (a copy is included in the LICENSE file that
 accompanied this code).

 You should have received a copy of the GNU General Public License version
 2 along with this work; if not, write to the Free Software Foundation,
 Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.

 Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 or visit www.oracle.com if you need additional information or have any
 questions.
-->

<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Language" content="en-US">
  <title>AsmTools Tutorial</title>
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="Generator" content="XSolBook3.5 XML Custom XSLT Filter">
  <meta name="keywords" content="AsmTools, Assembler Tools User's Guide">
  <meta name="dc.title" content="AsmTools Tutorial">
  <meta name="description"
 content="This manual describes how to use the AsmTools.">
  <meta name="identifier" content="000-0000-00">
  <meta name="date" content="">
  <meta name="issued" content="2009-02-20">
  <meta name="revision" content="">
  <meta name="publisher" content="Oracle, Inc.">
  <meta name="collection" content="reference">
  <meta name="robots" content="index, follow">
<!--Inserts the stylesheet-->
  <link rel="STYLESHEET" href="unx_str_styles.css" charset="ISO-8859-1"
 type="text/css">
</head>
<body class="HlpBdy" leftmargin="10" topmargin="10"
 style="background-color: rgb(255, 255, 255);" marginheight="10"
 marginwidth="10">
<a name="top"></a>
<div class="navbar" align="center">
<table dir="ltr"
 summary="Navigation bar, includes the book title and navigation buttons"
 width="100%" border="0" cellpadding="0" cellspacing="0">
  <colgroup span="2" width="100%"><col id="t1" span="1" width="50%"><col
 id="t2" span="1" width="50%"></colgroup><tbody>
    <tr bgcolor="#cccccc">
      <td class="navbartitle" rowspan="1" colspan="1" abbr="ChapTitle"
 align="left"><a name="Z400012b9112"></a>Java Assembler Tools
(AsmTools) User's Guide</td>
      <td rowspan="1" colspan="1" abbr="NavButtons" valign="top"
 align="right"><a href="index.html"><img src="shared/toc01.gif"
 title="Table Of Contents" alt="Table Of Contents" width="30" border="0"
 height="26"></a><a href="chapter1.html"><img src="shared/prev01.gif"
 title="Previous Chapter" alt="Previous Chapter" width="30" border="0"
 height="26"></a><a href="chapter3.html"><img src="shared/next01.gif"
 title="Next Chapter" alt="Next Chapter" width="30" border="0"
 height="26"></a><a href="ix.html"><img src="shared/index01.gif"
 title="Book Index" alt="Book Index" width="30" border="0" height="26"></a></td>
    </tr>
  </tbody>
</table>
<p class="feedback">
<script language="javascript" type="text/javascript" charset="UTF-8"
 src="/app/css/oo_engine.js"></script><a>
<script language="javascript" type="text/javascript" charset="UTF-8">
O_GoT('<img src="/app/images/sm_3E6B8A_oo.gif" border="0" alt="Feedback link" title="Feedback">Feedback');
</script></a></p>
<br>
<br>
</div>
<table dir="ltr" summary="Chapter Number" abbr="ChapNum" width="100%"
 border="0">
  <colgroup span="1" width="100%"><col id="ch1" span="1"></colgroup><tbody>
    <tr>
      <td class="ChapNumber" align="right"><span class="ChapNumPrefix">CHAPTER</span>&nbsp; <span class="ChapNumNum">2</span><span
 class="ChapNumSuffix"></span></td>
    </tr>
  </tbody>
</table>
<hr size="7" noshade="noshade">

<!-- ============ -->
<!-- MAIN CONTENT -->
<!-- ============ -->
<!-- BEGIN PAGETITLE ONE LINE -->
<h1 class="chaptitle" align="right"><a name="d0e1017"></a> Using the AsmTools</h1>
<p class="paragraph"><a name="d0e1021"></a>
<!-- END PAGETITLE ONE LINE -->
This chapter describes
general principles and techniques for using the
AsmTools. For detailed information about the syntax of each
component and command line examples, see
<a href="appendix2.html#Z400013211728">Appendix B</a>.
If no command-line options are provided or they are invalid,
the tools provide error messages and usage information. To get the
help message, launch AsmTools without any parameters as follows:</p>
<p class="paragraph"><a name="d0e1026"></a><kbd class="command">java<br>
<br>
-jar asmtools.jar</kbd></p>
<p class="paragraph"><a name="d0e1030"></a>The help system describes
how to use all of the AsmTools components and contains the
following topics described in this chapter.</p>
<ul type="square">
  <li>
    <p class="paragraph"><a name="d0e1035"></a>
  <a href="#BADGCIGA">Assemblers and Disassemblers</a></p>
  </li>
  <li>
    <p class="paragraph"><a name="d0e1035"></a><a
 href="chapter2.html#BADGCIGB">JASM vs JCOD<br>
    </a></p>
  </li>
  <li>
    <p class="paragraph"><a name="d0e1039"></a><a href="#BADCEIIF">Tool
Usage<br>
    </a></p>
    <ul type="disc">
      <li>
        <p class="paragraph"><a name="d0e1044"></a><a href="#BADEFIIJ">JASM</a></p>
      </li>
      <li>
        <p class="paragraph"><a name="d0e1048"></a><a href="#BADCBFCE">JDIS</a></p>
      </li>
      <li>
        <p class="paragraph"><a name="d0e1052"></a><a href="#BADIFAIE">JCODER</a></p>
      </li>
      <li>
        <p class="paragraph"><a name="d0e1056"></a><a href="#BADHJAHI">JDEC</a></p>
      </li>
      <li>
        <p class="paragraph"><a name="d0e1060"></a><a href="#BADBIGAE">JCDEC</a></p>
      </li>
    </ul>
  </li>
</ul>
<hr size="5" noshade="noshade">
<a name="BADGCIGA"></a>
<h1 class="head1">Assemblers and Dissassemblers<br>
</h1>
Assembly and Dissassembly are reflexive operations.&nbsp; You can feed
one tool into another to achieve the same file.&nbsp; For example<br>
<br>
<b>java -jar asmtools.jar jdec foo.class  # produces foo.jcod</b><br>
<b>java -jar asmtools.jar jcod foo.jcod   # produces foo.class</b><br>
<p class="paragraph">For a given class foo.class, the product of
dissassembly, and re-assembly is the same foo.class.<br>
</p>
<p style="margin-bottom: 0in;"><br>
</p>
<hr size="5" noshade="noshade">
<a name="BADGCIGB"></a>
<h1 class="head1">JASM vs. JCod<br>
</h1>
<p class="paragraph">Which format to use depends on the task you are
trying to do. We can describe some generalizations of when you might
wish to use the JASM format versus the JCOD format.&nbsp;&nbsp; <br>
</p>
<h4>JASM<br>
</h4>
<p class="paragraph">The
biggest difference between the two formats is that JASM specifically
focuses on representing byte-code instructions in the VM format (while
providing minimal description of the structure of&nbsp; the rest of the
class file).&nbsp; Generally, JASM is more convenient for semantic
changes, like change to instruction flow. <br>
</p>
<h4>JCOD</h4>
<p class="paragraph">JCOD provides good support
for describing the structure of a class file (as well as writing
incorrect bytes outside of this structure), and provides no support for
specifying byte-code instructions (simply raw bytes for
instructions).&nbsp;&nbsp; JCOD is typically used for VMs to test
Well-formedness of class files (eg extra or missing bytes), boundary
issues, constant-pool coherence, constant-pool index coherence,
attribute well-formedness, etc..<br>
</p>
<h4>Use Cases</h4>
<p class="paragraph">Below are typical cases of usage of both formats:<br>
<br>
JASM usages:<br>
<br>
</p>
<ul>
  <li>&nbsp;To obtain an invalid class where two methods have the same
signature</li>
  <li>&nbsp;To obtain an invalid class reference where an illegal type is used</li>
  <li>&nbsp;To obtain an invalid class with missing/removed instructions</li>
  <li>&nbsp;To insert profiling instructions in methods</li>
  <li>&nbsp;To obtain a class where a keyword is used as an identifier</li>
  <li>&nbsp;To check that two classes produced by different compilers
are equivalent<br>
  </li>
</ul>
<p class="paragraph"><br>
JCOD usages:<br>
<br>
</p>
<ul>
  <li>&nbsp;To examine specific parts of a classfile <br>
  </li>
  <ul>
    <li>eg. constant-pool (for dependency analysis)</li>
    <li>constant values</li>
    <li>inheritance chains (super classes)</li>
    <li>implementation fullfillment (interface resolution)</li>
  </ul>
</ul>
<p style="margin-bottom: 0in;"><br>
</p>
<hr size="5" noshade="noshade"><br>
<a name="BADCEIIF"></a>
<h1 class="head1">Tool Usage<br>
</h1>
Asmtools consist of five utilities:<br>
<br>
<ul>
  <li>&nbsp;jasm - Generates class files from the JASM representation</li>
  <li>&nbsp;jdis - Represents class file in JASM format</li>
  <li>&nbsp;jcoder - Generates class files from the JCOD representation</li>
  <li>&nbsp;jdec - Represents class file in JCOD format</li>
  <li>&nbsp;jcdec - Represents JavaCard cap and exp files in JCOD format</li>
</ul>
<br>
Each utility can be invoked from the command line as shown below:<br>
<br style="font-weight: bold;">
<span style="font-weight: bold;">$ java -jar asmtools.jar UTILITY
[options] File1 ...</span><br>
<br>
or<br>
<br style="font-weight: bold;">
<span style="font-weight: bold;">$ java -cp asmtools.jar&nbsp;
com.sun.asmtools.UTILITY.Main [options] File1 ...</span><br>
<br>
Each utility supports own set of options<br>
<hr size="1" noshade="noshade">
<table width="100%" cellpadding="2" cellspacing="2">
  <col width="100"> <tbody>
    <tr>
      <td valign="top">
      <p align="left"><a name="d0e1281"></a><b>Note - </b>See the
following sections for the options associated with each tool.<br>
      </p>
      </td>
    </tr>
  </tbody>
</table>
<hr size="1" noshade="noshade">
<p class="paragraph"><br>
</p>
<hr size="5" width="108" align="left" noshade="noshade">
<a name="BADEFIIJ"></a>
<h2 class="head2">JASM</h2>
<p class="paragraph"><a name="DDE_LINK"></a><span
 style="font-style: italic;">jasm</span> is an assembler that accepts a
text file based on the JASM Specification, and produces a .class file
for use with a Java Virtual Machine.<br>
</p>
<h4>Usage:<br>
</h4>
<p class="paragraph"><span style="font-weight: bold;">$ java -jar
asmtools.jar jasm [options] filename.jasm</span><br>
<br>
or<br>
<br>
<span style="font-weight: bold;">$ java -cp asmtools.jar
com.sun.asmtools.jasm.Main [options] filename.jasm</span><br>
<br>
</p>
<h4>Options:</h4>
<p class="paragraph"><span style="font-weight: bold;">-version</span>
Print jasm version<br>
<br>
<span style="font-weight: bold;">-d destdir </span>Specifies a
directory to place resulting .class files. If a destdir is not
provided, the .class file will be written in the current directory.<br>
<br>
<span style="font-weight: bold;">-g </span>Add debug information to
.class file.<br>
<br>
<span style="font-weight: bold;">-nowrite</span> Do not write resulting
.class files. This option may be used to verify the integrity of your
source jasm file.<br>
<br style="font-weight: bold;">
<span style="font-weight: bold;">-strict</span> Consider warnings as
errors.<br>
<br>
<span style="font-weight: bold;">-nowarn</span> Do not print warnings.<br>
<br>
<span style="font-weight: bold;">-cv major.minor</span> Set the
operating class file version (by default 45.3).</p>
<hr size="1" noshade="noshade">
<table width="100%" cellpadding="2" cellspacing="2">
  <col width="100"> <tbody>
    <tr>
      <td valign="top">
      <p align="left"><a name="d0e1281"></a><b>Note - </b>If the
optional class attribute '<span style="font-style: italic;">version</span>'defines
(in source of class) the class file version then it overrides default class file version set
by <span style="font-style: italic;">-cv</span> option. </p>
      </td>
    </tr>
  </tbody>
</table>
<hr size="1" noshade="noshade">
<p class="paragraph"><span style="font-weight: bold;"></span><br>
</p>
<h4>Description:</h4>
<p class="paragraph">To use jasm, specify the filename of the .jasm
file you wish to develop a .class file from. The Jasm Specification
contains information relative to the format of a .jasm file. <br>
</p>
<p class="paragraph"><br>
</p>
<hr size="5" width="108" align="left" noshade="noshade">
<a name="BADCBFCE"></a>
<h2 class="head2">JDIS</h2>
<p class="paragraph"><a name="DDE_LINK"></a><i>jdis</i> is a
disassembler that accepts a <code>.class</code> file, and prints the
plain-text
translation of <code>jasm</code> source file to the standard output.
</p>
<h4>Usage:<br>
</h4>
<p class="paragraph"><span style="font-weight: bold;">$ java -jar
asmtools.jar jdis [options] filename.class</span><br>
<br>
or<br>
<br>
<span style="font-weight: bold;">$ java -cp asmtools.jar
com.sun.asmtools.jdis.Main [options] filename.class</span><br>
<br>
</p>
<h4>Options:</h4>
<p class="paragraph"><span style="font-weight: bold;">-version</span>
Print jdis version<span style="font-weight: bold;"></span><br>
<br>
<span style="font-weight: bold;">-g </span>Generate a detailed output
format. Constants from constant pool are printed, and instructions in
methods are preceded with source line numbers (if attribute
LineNumberTable is available) and with bytecode program counters.<br>
<br>
<span style="font-weight: bold;">-s1</span> Generate source lines in
comments. Commented lines of the source file, from which given .class
file is obtained, are printed above the corresponding instruction. Both
attributes LineNumberTable and SourceFile must be available. The source
file should be placed in the current working directory.<br>
<br style="font-weight: bold;">
<span style="font-weight: bold;">-hx</span> Generate floating-point
constants in hexadecimal format.</p>
<h4>Description:</h4>
<p> To use jdis, specify a <em>filename</em><code>.class</code>
that you wish to disassemble. <br>
You may redirect standard output to
a <em>filename</em> <code>.jasm</code> file. Jdis will disassemble a <code>.class</code>
file and create a resultant <code>.jasm</code> source file. </p>
<p>Refer to the <a
 href="../../work/asmtools/asm-tools-4.1.2-build/release/doc/misc/jasmspec.html">Jasm
Assembler</a> documentation for information on the structure of the
resultant <code>.jasm</code> file.<br>
</p>
<p class="paragraph"><br>
</p>
<hr size="5" width="108" align="left" noshade="noshade">
<a name="BADIFAIE"></a>
<h2 class="head2">JCoder</h2>
<p class="paragraph"><a name="DDE_LINK"></a><i>jcoder</i> is a
low-level assembler that accepts text based on the <a
 href="../../work/asmtools/asm-tools-4.1.2-build/release/doc/misc/jcoderspec.html">Jcoder
Specification.</a> and produces a <code>.class</code> file for use
with a Java Virtual Machine. Jcoder's primary use is as a tool for
producing specialized tests for testing a JVM implementation.
</p>
<h4>Usage:<br>
</h4>
<p class="paragraph"><span style="font-weight: bold;">$ java -jar
asmtools.jar jcoder [options] filename.jcod</span><br>
<br>
or<br>
<br>
<span style="font-weight: bold;">$ java -cp asmtools.jar
com.sun.asmtools.jcoder.Main [options] filename.jcod</span><br>
<br>
</p>
<h4>Options:</h4>
<p class="paragraph"><span style="font-weight: bold;">-version</span>
Print jcoder version<br>
<br>
<span style="font-weight: bold;">-d destdir </span>Specifies a
directory to place resulting .class files. If a destdir is not
provided, the .class file will be written in the current directory.<br>
<br>
<span style="font-weight: bold;">-nowrite</span> Do not write resulting
.class files. This option may be used to verify the integrity of your
source jcoder file.<br>
</p>
<h4>Description:</h4>
<p class="paragraph"> To use jcoder, specify the <em>filename</em><code>.jcod</code>
file you
wish to develop a <code>.class</code> file from. The <a
 href="../../work/asmtools/asm-tools-4.1.2-build/release/doc/misc/jcoderspec.html">
Jcoder Specification</a> contains information relative to the format of
a <code>.jcod</code> file.
</p>
<p class="paragraph"><br>
</p>
<hr size="5" width="108" align="left" noshade="noshade">
<a name="BADHJAHI"></a>
<h2 class="head2">JDec</h2>
<p class="paragraph"><a name="DDE_LINK"></a><i>jdec</i> is a low-level
disassembler that accepts <code>.class</code> file and prints a plain
text of <code>jcod</code> source file to the standard output.
</p>
<h4>Usage:<br>
</h4>
<p class="paragraph"><span style="font-weight: bold;">$ java -jar
asmtools.jar jdec [options] filename.class [&gt; filename.jcod]</span><br>
<br>
or<br>
<br>
<span style="font-weight: bold;">$ java -cp asmtools.jar
com.sun.asmtools.jdec.Main [options] filename.class</span><span
 style="font-weight: bold;"> [&gt; filename.jcod]</span><br>
<br>
</p>
<h4>Options:</h4>
<p class="paragraph"><span style="font-weight: bold;">-version</span>
Print jdec version<span style="font-weight: bold;"></span><br>
<br>
<span style="font-weight: bold;">-g </span>Generate a detailed output
format. <br>
</p>
<h4>Description:</h4>
<p>To use jdec, specify a <code><em>filename.class</em></code> that
you wish to disassemble. <br>
You may redirect standard output to a <code><em>filename.jcod</em></code>
file. <i>jdec</i> will disassemble <code>.class</code> file and
create a resultant <code>.jcod</code> plain source file.
</p>
<p> Refer to the <a
 href="../../work/asmtools/asm-tools-4.1.2-build/release/doc/misc/jcoderspec.html">Jcoder
Low-Level
Assembler</a> documentation for information on the structure
of the resultant <code>.jcod</code> file.<br>
</p>
<p class="paragraph"><br>
</p>
<hr size="5" width="108" align="left" noshade="noshade">
<a name="BADBIGAE"></a>
<h2 class="head2">JCDec</h2>
<p class="paragraph"><a name="DDE_LINK"></a><i>jcdec</i> is a low-level
disassembler that accepts <code>.class</code> file and prints a plain
text of <code>jcod</code> source file to the standard output.
</p>
<h4>Usage:<br>
</h4>
<p class="paragraph"><span style="font-weight: bold;">$ java -jar
asmtools.jar jcdec [options] filename.exp | filename.cap [&gt;
filename.jcod]</span><br>
<br>
or<br>
<br>
<span style="font-weight: bold;">$ java -cp asmtools.jar
com.sun.asmtools.jcdec.Main [options] </span><span
 style="font-weight: bold;">filename.exp | filename.cap</span><span
 style="font-weight: bold;"> [&gt; filename.jcod]</span><br>
<br>
</p>
<h4>Options:</h4>
<p class="paragraph"><span style="font-weight: bold;">-version</span>
Print jcdec version<span style="font-weight: bold;"></span><br>
<br>
<span style="font-weight: bold;">-g </span>Generate a detailed output
format. <br>
</p>
<h4>Description:</h4>
<p>To use jcdec, specify a <code><em>filename.exp</em></code> or <code><em>filename.cap</em></code>
that you wish to disassemble. <br>
You may redirect standard output to a <code><em>filename.jcod</em></code>
file. <i>jcdec</i> will disassemble the file and create a resultant <code>.jcod</code>
plain source file.
</p>
<p> Refer to the <a
 href="../../work/asmtools/asm-tools-4.1.2-build/release/doc/misc/jcoderspec.html">Jcoder
Low-Level
Assembler</a> documentation for information on the structure
of the resultant <code> .jcod</code> file.
</p>
<p>
</p>
<br>
<center>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <col width="45"> <col width="25"> <col width="30"> <tbody>
    <tr bgcolor="#cccccc">
      <td>
      <p align="left">Java Assembler Tools (AsmTools) User's Guide</p>
      </td>
      <td>
      <p align="right">000-0000-00</p>
      </td>
      <td valign="top">
      <p align="right"><a href="index.html"><img src="shared/toc01.gif"
 name="graphics14" alt="Table Of Contents" width="30" align="bottom"
 border="0" height="26"></a> <a href="chapter1.html"><img
 src="shared/prev01.gif" name="graphics15" alt="Previous Chapter"
 width="30" align="bottom" border="0" height="26"></a><a
 href="chapter3.html"><img src="shared/next01.gif" name="graphics16"
 alt="Next Chapter" width="30" align="bottom" border="0" height="26"></a><a
 href="ix.html"><img src="shared/index01.gif" name="graphics17"
 alt="Book Index" width="30" align="bottom" border="0" height="26"></a></p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<p class="copyrightlink">
<script language="javascript">
       O_GoT('<img src="/app/images/sm_3E6B8A_oo.gif" border="0" alt="Feedback link" title="Feedback">Feedback');

</script></p>
<hr size="7" noshade="noshade">
<center>
Copyright &copy; 2012, 2017, Oracle and/or its affiliates. All rights reserved.
</center>
</body>
</html>
